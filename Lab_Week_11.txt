1. When a user takes a picture, that picture is stored in a path based on the given URI. In which part of the code handles this?
Answer:
The code handling this is located in ProviderFileManager.kt inside the generatePhotoUri function:

fun generatePhotoUri(time: Long): FileInfo {
    val name = "img_$time.jpg"
    val file = File(
        context.getExternalFilesDir(fileHelper.getPicturesFolder()),
        name
    )
    return FileInfo(
        fileHelper.getUriFromFile(file),
        file,
        name,
        fileHelper.getPicturesFolder(),
        "image/jpeg"
    )
}

2. In your FileInfo.kt, there are 5 attributes. On the first attribute, what does the URI refer to? And on the fourth attribute, what does relativePath refer to?
Answer:
- [cite_start]The URI (first attribute) refers to the temporary content URI generated by FileProvider [cite: 390-394]. This URI allows external applications (like the Camera app) to securely access and write data to the file created in our app's storage.
- [cite_start]The relativePath (fourth attribute) refers to the directory folder name where the media file should be categorized within the MediaStore (e.g., Environment.DIRECTORY_PICTURES or "Pictures") [cite: 402-409, 437-438]. This tells the Gallery app where to display the image.

3. Explain the chronological order from when a user takes a picture until the file is stored in the MediaStore.
Answer:
1. User clicks the "Photo" button in MainActivity.
2. The app checks for storage permissions.
3. If granted, openImageCapture() is called.
4. ProviderFileManager.generatePhotoUri() creates a temporary empty file in external storage and generates a URI using FileProvider.
5. The Camera Intent is launched (takePictureLauncher.launch) passing this URI.
6. User captures a photo; the Camera app writes the image data into the URI we provided.
7. The launcher callback returns success.
8. MainActivity calls providerFileManager.insertImageToStore().
9. MediaContentHelper generates the necessary metadata (ContentValues) for the Gallery.
10. ProviderFileManager inserts this metadata into the MediaStore to reserve a spot.
11. Finally, IOUtils.copy() copies the actual image data from our temporary file (FileProvider) into the MediaStore's permanent location, making it visible in the Gallery app.